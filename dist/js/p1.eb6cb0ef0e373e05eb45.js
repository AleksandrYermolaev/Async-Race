(()=>{"use strict";var e={619:(e,t,n)=>{n.r(t)},539:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteWinner=t.updateWinner=t.createWinner=t.getWinner=t.getWinners=t.driveCar=t.startStopEngine=t.deleteCar=t.updateCar=t.createCar=t.getCar=t.getCars=void 0;const a=n(996);t.getCars=async(e,t=7)=>{const n=await fetch(`${a.GARAGE_ENDPOINT}?_page=${e}&_limit=${t}`);return{cars:await n.json(),amount:n.headers.get("X-Total-Count")}},t.getCar=async e=>(await fetch(`${a.GARAGE_ENDPOINT}/${e}`)).json(),t.createCar=async e=>(await fetch(a.GARAGE_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),t.updateCar=async e=>(await fetch(`${a.GARAGE_ENDPOINT}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,color:e.color})})).json(),t.deleteCar=async e=>{await fetch(`${a.GARAGE_ENDPOINT}/${e}`,{method:"DELETE"})},t.startStopEngine=async(e,t)=>(await fetch(`${a.ENGINE_ENDPOINT}?id=${e}&status=${t}`,{method:"PATCH"})).json(),t.driveCar=async(e,t)=>{const n=await fetch(`${a.ENGINE_ENDPOINT}?id=${e}&status=${t}`,{method:"PATCH"});return n.ok?n.json():{success:!1}},t.getWinners=async(e,t=10,n,r)=>{const s=await fetch(`${a.WINNERS_ENDPOINT}?_page=${e}&_limit=${t}&_sort=${n}&_order=${r}`);return{winners:await s.json(),amount:s.headers.get("X-Total-Count")}},t.getWinner=async e=>await fetch(`${a.WINNERS_ENDPOINT}/${e}`),t.createWinner=async e=>(await fetch(a.WINNERS_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),t.updateWinner=async e=>(await fetch(`${a.WINNERS_ENDPOINT}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wins:e.wins,time:e.time})})).json(),t.deleteWinner=async e=>{await fetch(`${a.WINNERS_ENDPOINT}/${e}`,{method:"DELETE"})}},802:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listener=t.listenSorting=t.listenReset=t.listenRace=t.listenGenerateCars=t.listenPagination=t.setListenersToCars=t.listenUpdateCar=t.listenCreateCar=t.listenPageChange=void 0;const a=n(752),r=n(996),s=n(471),o=n(361),i=n(532),c=n(26),d=n(678),l=n(14),u=n(807),m=n(825),g=n(959),p=n(566),E=n(387),v=n(409),_=n(502),b=n(939),w=n(257),y=n(629),C=n(974),S=n(539);t.listenPageChange=()=>{const e=(0,o.getButtonElement)(document,"#to-garage"),t=(0,o.getButtonElement)(document,"#to-winners"),n=(0,d.getDivElement)(document,".wrapper__garage"),a=(0,d.getDivElement)(document,".wrapper__winners");e.addEventListener("click",(()=>{n.classList.remove("hide"),a.classList.add("hide"),(0,w.updateButtonStates)()})),t.addEventListener("click",(async()=>{await(0,C.updateWinners)((0,c.getCurrentWinnersPage)()),n.classList.add("hide"),a.classList.remove("hide"),(0,w.updateButtonStates)()}))},t.listenCreateCar=()=>{const e=(0,l.getInputElement)(document,"#set-car-name"),t=(0,l.getInputElement)(document,"#set-car-color");(0,o.getButtonElement)(document,"#create-car").addEventListener("click",(async()=>{e.value&&(await(0,S.createCar)({name:e.value,color:t.value}),await(0,y.updateGarage)((0,i.getCurrentPage)()),e.value="",t.value="#FFFFFF")}))},t.listenUpdateCar=()=>{const e=(0,l.getInputElement)(document,"#update-car-name"),t=(0,l.getInputElement)(document,"#update-car-color"),n=(0,o.getButtonElement)(document,"#update-car");n.addEventListener("click",(async function(){if(e.value){const a=Number(n.dataset.car);await(0,S.updateCar)({name:e.value,color:t.value,id:a}),await(0,y.updateGarage)((0,i.getCurrentPage)()),e.disabled=!0,e.value="",t.disabled=!0,t.value="#FFFFFF",n.disabled=!0}}))};const h=async e=>{const t=(0,o.getButtonElement)(e,"#accelerate"),n=(0,o.getButtonElement)(e,"#brake"),r=Number(e.id),s=(0,u.getSpanElement)(e,"#car-name").textContent;t.disabled=!0;const i=await(0,S.startStopEngine)(r,b.EngineStatus.Started),c=i.distance/i.velocity;return n.disabled=!1,await(0,a.animateCar)(e,c)?Promise.resolve({carId:r,carName:s,raceDuration:c}):Promise.reject(`${s}'s (id ${r}) engine broke down`)},P=async e=>{const t=(0,o.getButtonElement)(e,"#accelerate"),n=(0,o.getButtonElement)(e,"#brake"),r=(0,m.getSvgElement)(e,"#car-image"),s=Number(e.id);n.disabled=!0,await(0,S.startStopEngine)(s,b.EngineStatus.Stopped),window.cancelAnimationFrame(a.animationId.id),r.style.transform="translateX(0)",t.disabled=!1};t.setListenersToCars=()=>{const e=document.querySelectorAll(".car-track"),t=(0,l.getInputElement)(document,"#update-car-name"),n=(0,l.getInputElement)(document,"#update-car-color"),a=(0,o.getButtonElement)(document,"#update-car");e.forEach((e=>{((e,t,n,a)=>{const r=(0,o.getButtonElement)(e,"#select"),s=Number(e.id);r.addEventListener("click",(async()=>{const e=await(0,S.getCar)(s);t.disabled=!1,n.disabled=!1,a.disabled=!1,t.value=e.name,n.value=e.color,a.dataset.car=`${e.id}`}))})(e,t,n,a),(e=>{const t=(0,o.getButtonElement)(e,"#remove"),n=Number(e.id);t.addEventListener("click",(async()=>{await(0,S.deleteCar)(n),await(0,S.deleteWinner)(n),await(0,y.updateGarage)((0,i.getCurrentPage)()),await(0,C.updateWinners)((0,c.getCurrentWinnersPage)())}))})(e),(e=>{const t=(0,o.getButtonElement)(e,"#accelerate"),n=(0,o.getButtonElement)(e,"#brake");t.addEventListener("click",(async()=>{try{await h(e)}catch(e){console.log(e)}})),n.addEventListener("click",(async()=>{await P(e)}))})(e)}))};const M=async(e,t,n)=>{e.classList.contains("hide")||((0,u.getSpanElement)(document,"#page-num").textContent=`${(0,i.getCurrentPage)()+n}`,await(0,y.updateGarage)((0,i.getCurrentPage)())),t.classList.contains("hide")||((0,u.getSpanElement)(document,"#winners-page-num").textContent=`${(0,c.getCurrentWinnersPage)()+n}`,await(0,C.updateWinners)((0,c.getCurrentWinnersPage)()))};t.listenPagination=()=>{const e=(0,o.getButtonElement)(document,"#prev-page"),t=(0,o.getButtonElement)(document,"#next-page"),n=(0,d.getDivElement)(document,".wrapper__garage"),a=(0,d.getDivElement)(document,".wrapper__winners");t.addEventListener("click",(async()=>{await M(n,a,1)})),e.addEventListener("click",(async()=>{await M(n,a,-1)}))},t.listenGenerateCars=()=>{(0,o.getButtonElement)(document,"#generate").addEventListener("click",(async()=>{const e=(0,s.generateRandomCars)().map((e=>(0,S.createCar)(e)));await Promise.all(e),(0,y.updateGarage)((0,i.getCurrentPage)())}))},t.listenRace=()=>{const e=(0,o.getButtonElement)(document,"#race"),t=(0,o.getButtonElement)(document,"#reset");e.addEventListener("click",(async()=>{e.disabled=!0;const n=document.querySelectorAll(".car-track"),a=Array.from(n).map((e=>h(e)));let r={carId:0,carName:null,raceDuration:0};try{r=await Promise.any(a),(0,_.toggleWinnerMessage)(r),await(0,p.setCarToWinners)(r.carId,r.raceDuration)}catch(e){(0,v.toggleErrorMessage)()}finally{t.disabled=!1}}))},t.listenReset=()=>{const e=(0,o.getButtonElement)(document,"#reset"),t=(0,o.getButtonElement)(document,"#race");e.addEventListener("click",(async()=>{e.disabled=!0;const n=document.querySelectorAll(".car-track"),a=Array.from(n).map((e=>P(e)));await Promise.all(a),(0,_.toggleWinnerMessage)(),t.disabled=!1}))},t.listenSorting=()=>{const e=(0,g.getTdElement)(document,"#sort-wins"),t=(0,g.getTdElement)(document,"#sort-time");e.addEventListener("click",(()=>{t.className="";const n=(0,E.sortWinner)(e);(0,C.updateWinners)((0,c.getCurrentWinnersPage)(),r.WINNERS_PAGE_LIMIT,b.SortByParam.Wins,n)})),t.addEventListener("click",(()=>{e.className="";const n=(0,E.sortWinner)(t);(0,C.updateWinners)((0,c.getCurrentWinnersPage)(),r.WINNERS_PAGE_LIMIT,b.SortByParam.Time,n)}))},t.listener=()=>{(0,t.listenPageChange)(),(0,t.listenCreateCar)(),(0,t.listenUpdateCar)(),(0,t.setListenersToCars)(),(0,w.updateButtonStates)(),(0,t.listenPagination)(),(0,t.listenGenerateCars)(),(0,t.listenRace)(),(0,t.listenReset)(),(0,t.listenSorting)()}},172:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderGaragePage=t.renderTracks=t.createCar=void 0,t.createCar=(e,t,n)=>`<svg class="${t}" id="${n}" version="1.0" xmlns="http://www.w3.org/2000/svg" width="1280.000000pt" height="640.000000pt" viewBox="0 0 1280.000000 640.000000" preserveAspectRatio="xMidYMid meet">\n  <g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)" fill="${e}" stroke="none">\n    <path d="M3525 5341 c-72 -18 -79 -28 -90 -121 -4 -30 -11 -62 -16 -71 -4 -9 -97 -51 -206 -94 -774 -304 -1348 -540 -1603 -661 -163 -77 -222 -91 -421 -104 -85 -5 -170 -14 -189 -20 -101 -32 -362 -58 -620 -63 l-115 -2 -47 -80 c-47 -78 -47 -80 -29 -100 34 -36 35 -77 5 -177 -30 -99 -34 -178 -19 -370 5 -67 4 -88 -6 -88 -29 0 -83 -56 -110 -114 -50 -106 -74 -343 -48 -467 13 -58 13 -62 3 -159 -5 -54 16 -238 28 -244 2 -1 29 -20 61 -41 73 -49 123 -103 132 -143 17 -79 167 -155 355 -181 104 -15 969 -97 1087 -104 l32 -2 5 160 c7 230 50 394 146 559 281 479 917 673 1405 429 316 -159 530 -424 598 -742 22 -106 29 -365 13 -519 l-8 -82 3002 0 c2855 0 3002 1 2995 18 -33 87 -56 325 -45 461 28 320 177 567 459 759 399 273 847 282 1243 24 239 -157 397 -392 460 -687 18 -84 15 -341 -5 -430 -8 -38 -14 -71 -12 -73 7 -8 386 20 478 34 180 28 253 65 304 152 24 41 28 57 28 127 -1 44 -9 117 -20 163 -18 79 -18 88 -2 190 31 199 40 306 41 497 1 176 -1 195 -23 260 -46 135 -103 190 -283 274 -222 104 -633 220 -1168 330 -523 108 -1524 210 -2054 211 l-229 0 -236 139 c-813 477 -1593 884 -1852 966 -498 157 -1598 195 -2892 100 l-188 -14 -47 30 c-92 58 -223 89 -297 70z m1912 -311 c13 -45 58 -305 88 -515 33 -226 74 -539 71 -542 -7 -7 -1672 40 -2054 58 -357 16 -464 56 -573 215 -62 91 -87 225 -59 326 12 40 56 74 192 148 369 198 799 289 1618 340 246 15 290 16 510 16 l194 -1 13 -45z m649 10 c383 -36 717 -86 934 -139 210 -52 451 -163 720 -332 141 -88 379 -259 380 -271 0 -5 -14 -8 -32 -8 -48 0 -114 -37 -140 -78 -24 -39 -30 -113 -15 -189 l9 -43 -904 0 -904 0 -176 540 -175 540 47 0 c25 0 141 -9 256 -20z"/>\n    <path d="M2617 3125 c-431 -82 -774 -440 -838 -875 -17 -117 -7 -292 24 -410 113 -436 497 -751 947 -777 507 -29 959 313 1076 813 28 117 26 348 -4 467 -94 378 -383 670 -760 768 -105 27 -336 34 -445 14z m378 -310 c84 -21 209 -85 280 -142 116 -94 210 -242 251 -393 23 -87 24 -260 0 -355 -58 -237 -242 -439 -473 -519 -531 -186 -1074 277 -969 828 30 152 94 274 206 386 111 110 237 178 385 206 84 16 235 11 320 -11z" />\n    <path d="M10723 3125 c-318 -58 -597 -266 -743 -555 -223 -441 -98 -996 289 -1288 112 -84 188 -125 311 -166 274 -91 545 -70 802 61 552 282 735 983 392 1500 -225 339 -651 521 -1051 448z m385 -315 c348 -98 579 -443 532 -796 -67 -508 -596 -796 -1055 -574 -239 116 -396 352 -412 620 -20 335 192 640 516 745 122 40 289 42 419 5z"/>\n  </g>\n  </svg>`,t.renderTracks=e=>{let n="";return e.forEach((e=>{var a;n+=`\n  <div class="car-track" id="${(a=e).id}">\n    <button class="car-track__button button" id="select">SELECT</button>\n    <button class="car-track__button button" id="remove">REMOVE</button>\n    <span class="car-track__name" id="car-name">${a.name}</span>\n    <div class="car-track__field field">\n      <button class="field__accelerate" id="accelerate">A</button>\n      <button class="field__brake" id="brake" disabled>B</button>\n      ${(0,t.createCar)(a.color,"field__car","car-image")}\n      <svg class="field__finish" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n  <g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)" fill="#c0291e">\n    <path d="M2172,4972.5c-222.8-59-487.2-192.2-696.9-347.3l-174.8-131.1l-26.2,63.3c-39.3,96.1-201,235.9-294.9,253.4c-216.2,39.3-415.1-41.5-509-207.5c-96.1-170.4-89.6-216.3,124.5-930.6c107-360.4,696.8-2335.2,1310.7-4390.8c613.8-2053.4,1133.7-3772.6,1153.4-3818.5c19.7-45.9,67.7-111.4,107-144.2c211.9-185.7,568-126.7,692.5,115.8c94,181.3,98.3,161.6-397.6,1824c-253.4,845.4-460.9,1551-460.9,1566.3c0,15.3,111.4,142,246.8,279.6C3539.4-593.5,3688-510.5,3947.9-493c216.3,13.1,421.6-41.5,1081.3-290.5c806.1-303.6,1465.8-504.6,2022.8-616c148.6-28.4,303.7-37.1,633.5-39.3c380.1,0,460.9,6.5,629.1,48.1c423.8,109.2,734,292.7,1070.4,637.9c157.3,159.5,211.9,229.4,203.2,257.8c-17.5,54.6-517.7,1730.1-1127.2,3781.3c-281.8,939.3-515.5,1706.1-524.3,1703.9c-6.6-4.4-124.5-126.7-262.1-273.1c-515.5-548.3-753.6-668.4-1332.5-668.4c-297.1,0-548.3,43.7-952.4,161.6c-299.3,85.2-1020.2,336.4-1404.6,489.3c-489.3,192.2-926.2,290.5-1389.3,308C2379.5,5014,2305.2,5009.7,2172,4972.5z M2705,4398c10.9-15.3,360.4-1166.5,360.4-1184c0-13.1-63.3-24-144.2-28.4c-179.1-4.4-456.6-98.3-620.4-205.4c-65.5-43.7-218.5-179.1-336.4-299.3c-118-122.3-220.6-216.3-225-211.9c-15.3,15.3-377.9,1188.4-377.9,1221.1c0,37.1,323.3,349.5,471.9,458.7c139.8,100.5,406.3,229.4,535.2,255.6C2447.2,4419.8,2694,4415.5,2705,4398z M5370,3596.3c133.3-32.8,343-78.6,469.7-98.3c126.7-21.8,231.6-39.3,233.7-41.5c13.1-10.9,375.7-1201.5,369.2-1210.2c-37.1-35-878.1,144.2-1306.3,279.6l-146.3,45.9l-98.3,310.2c-52.4,170.4-137.6,441.3-187.9,602.9c-50.2,161.7-96.1,305.8-102.7,321.1c-6.5,15.3,96.1-8.7,260-61.2C5009.6,3699,5239,3631.2,5370,3596.3z M3583.1,2916.9c118-37.1,362.6-124.5,541.7-194.4c181.3-67.7,421.6-155.1,537.4-194.4l207.5-67.7l229.4-738.3c144.2-465.3,220.6-738.4,205.3-742.7c-26.2-6.6-288.3,85.2-827.9,290.5c-181.3,69.9-415,146.4-522.1,174.8l-196.6,50.2l-227.2,727.4c-122.3,399.8-225,736.2-225,744.9C3305.7,2997.7,3364.7,2986.8,3583.1,2916.9z M8279.8,1785.4l225-749.3l-50.2-43.7c-310.2-270.9-803.9-447.8-1192.7-428.1l-139.8,6.5l-227.2,738.3c-126.7,406.3-222.8,744.9-216.3,751.5c6.6,6.6,107,21.8,220.6,30.6c373.5,30.6,760.2,172.6,1004.9,367c61.2,45.9,120.1,83,131.1,80.8C8048.2,2536.8,8157.4,2196,8279.8,1785.4z M3646.5,1359.4c2.2,0,83-262.1,181.3-581.1c98.3-318.9,183.5-594.2,187.9-613.8c8.8-28.4-19.6-39.3-163.8-59c-386.7-54.6-629.1-179.1-950.2-489.3l-218.4-211.9L2501.8-12.5c-98.3,321.1-179.1,598.6-179.1,616c0,17.5,115.8,152.9,257.8,297.1c225,233.7,277.4,275.2,441.3,356.1c201,96.1,369.2,135.4,524.3,118C3600.6,1368.1,3646.5,1361.6,3646.5,1359.4z M5892.1,636.3c310.2-87.4,744.9-176.9,967.7-198.8l159.5-15.3l56.8-187.9c30.6-102.7,115.8-373.5,185.7-598.5c69.9-227.2,128.9-423.8,128.9-439.1c0-59-653.2,78.6-1190.5,251.2l-270.9,85.2L5831-154.5c-52.4,170.4-133.3,428.2-179.1,572.3c-43.7,144.2-85.2,275.2-91.8,292.7c-8.8,24-2.2,28.4,28.4,15.3C5610.3,717.2,5747.9,677.8,5892.1,636.3z"/>\n  </g></g>\n  </svg>\n    </div>\n  </div>`})),n},t.renderGaragePage=(e,n=1)=>`\n  <div class="wrapper__garage garage">\n    <div class="modal hide"></div>\n    \n  <div class="garage__controls controls">\n    <div class="controls-line">\n      <input type="text" class="controls__input" id="set-car-name" />\n      <input type="color" class="controls__color" id="set-car-color" value="#FFFFFF" />\n      <button class="controls__create button" id="create-car">CREATE</button>\n    </div>\n    <div class="controls-line">\n      <input type="text" class="controls__input" id="update-car-name" disabled />\n      <input type="color" class="controls__color" id="update-car-color" value="#FFFFFF" disabled />\n      <button class="controls__update button" id="update-car" data-car="0" disabled>UPDATE</button>\n    </div>\n    <div class="controls-line">\n      <button class="controls__race button" id="race">RACE</button>\n      <button class="controls__reset button" id="reset" disabled>RESET</button>\n      <button class="controls__generate button" id="generate">GENERATE CARS</button>\n    </div>\n  </div>\n    <h1 class="header">Garage (<span id="cars-amount">${e.amount}</span>)</h1>\n    <h2 class="page-num">Page #<span id="page-num">${n}</span></h2>\n    ${(0,t.renderTracks)(e.cars)}\n  </div>`},150:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderPage=void 0;const a=n(539),r=n(172),s=n(989);t.renderPage=async()=>{const e=await(0,a.getCars)(1),t=(0,r.renderGaragePage)(e),n=await(0,a.getWinners)(1);return`\n  <div class="wrapper">\n    <button class="to-garage button" id="to-garage">TO GARAGE</button>\n    <button class="to-winners button" id="to-winners">TO WINNERS</button>\n    ${t}\n    ${await(0,s.renderWinnersPage)(n)}\n    <button class="wrapper__prev button" id="prev-page" disabled>PREV</button>\n    <button class="wrapper__next button" id="next-page" disabled>NEXT</button>\n  </div>`}},989:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderWinnersPage=t.renderWinners=void 0;const a=n(539),r=n(172),s=(e,t)=>` \n  <tr class="table__row">\n    <td id="table-id">${e.id}</td>\n    <td>${(0,r.createCar)(t.color,"table__car","table-car-image")}</td>\n    <td id="table-name">${t.name}</td>\n    <td id="table-wins">${e.wins}</td>\n    <td id="table-time">${e.time}</td>\n  </tr>`;t.renderWinners=async e=>{let t="";for(const n of e){const e=await(0,a.getCar)(n.id);t+=s(n,e)}return t},t.renderWinnersPage=async(e,n="1")=>{const a=await(0,t.renderWinners)(e.winners);return`\n  <div class="wrapper__winners winners hide">\n    <h1 class="winners__header">Winners (<span id="winners-amount">${e.amount}</span>)</h1>\n    <h2 class="winners__page-num">Page #<span id="winners-page-num">${n}</span></h2>\n    <table class="winners__table table">\n      <thead>\n        <tr class="table__head">\n          <td>Number</td>\n          <td>Car icon</td>\n          <td>Car name</td>\n          <td id="sort-wins">Wins</td>\n          <td id="sort-time">Best time (sec)</td>\n        </tr>\n      </thead>\n      <tbody id="table-body">\n      ${a}\n      </tbody>\n    </table>\n  </div>`}},752:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.animateCar=t.animationId=void 0;const a=n(539),r=n(825),s=n(939);t.animationId={id:0},t.animateCar=async(e,n)=>{const o=(0,r.getSvgElement)(e,".field__finish"),i=(0,r.getSvgElement)(e,"#car-image"),c=Number(e.id),d=o.getBoundingClientRect().x+o.getBoundingClientRect().width-i.getBoundingClientRect().x;let l,u=0;const m=e=>{u||(u=e);const a=e-u,r=d/n*a;i.style.transform=`translateX(${Math.min(r,d)}px)`,a<n&&(l=requestAnimationFrame(m)),t.animationId.id=l};return l=requestAnimationFrame(m),((e,t)=>!!e||(cancelAnimationFrame(t),!1))(await(async e=>{const{success:t}=await(0,a.driveCar)(e,s.EngineStatus.Drive);return t})(c),l)}},996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WINNERS_PAGE_LIMIT=t.WINNERS_ENDPOINT=t.ENGINE_ENDPOINT=t.GARAGE_ENDPOINT=void 0;const n="http://127.0.0.1:3000";t.GARAGE_ENDPOINT=`${n}/garage`,t.ENGINE_ENDPOINT=`${n}/engine`,t.WINNERS_ENDPOINT=`${n}/winners`,t.WINNERS_PAGE_LIMIT=10},471:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomCars=void 0;const n=[{company:"Ford",models:["Mustang","Fiesta","Focus","GT","Fusion","Mondeo"]},{company:"Opel",models:["Astra","Vectra","Signum","Corsa","Insignia","Zafira"]},{company:"Toyota",models:["Camry","Crown","Supra","Corolla","GT86","Celica","MR2","2000GT"]},{company:"Tesla",models:["Model X","Model S","Model Z"]},{company:"Wolksvagen",models:["Passat","Jetta","CC","Golf","Corrado","Scirocco","GTI","Desert"]},{company:"Porshe",models:["Cayene","Cayman","911","Panamera","GT3","Macan Turbo","718","918","968 Turbo S","914"]},{company:"Lamborghini",models:["Diablo","Murchelago","Urus","Aventador","Veneno","Gallardo"]},{company:"Buggatti",models:["Veyron","Shiron","Divo"]},{company:"Audi",models:["R8","S1","RS7","RS6","RS4","RS3","TT"]},{company:"BMW",models:["Z4","M5","M2","M4","M6","X5","X6"]},{company:"Dodge",models:["Viper","Charger","Challenger"]},{company:"Honda",models:["Civic","S2000","CR-X","CR-V"]},{company:"Lotus",models:["Evija","3-Eleven","Exige S","Elise"]},{company:"Mazda",models:["MX-5","RX-8","RX-7"]},{company:"Nissan",models:["Skyline","Titan","GT-R","370Z","Fairlady","Silvia","R390","240SX"]}],a=()=>{const e=Math.round(Math.random()*(n.length-1)),t=Math.round(Math.random()*(n[e].models.length-1));return`${n[e].company} ${n[e].models[t]}`},r=()=>{const e=Math.floor(256*Math.random()).toString(16),t=Math.floor(256*Math.random()).toString(16),n=Math.floor(256*Math.random()).toString(16);return`#${e.padStart(2,"0")}${t.padStart(2,"0")}${n.padStart(2,"0")}`};t.generateRandomCars=(e=100)=>{const t=[];for(let n=0;n<e;n+=1)t.push({name:a(),color:r()});return t}},887:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllCarsAmount=void 0;const a=n(807);t.getAllCarsAmount=()=>{const e=(0,a.getSpanElement)(document,"#cars-amount");return Number(e.textContent)}},986:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllWinnersAmount=void 0;const a=n(807);t.getAllWinnersAmount=()=>{const e=(0,a.getSpanElement)(document,"#winners-amount");return Number(e.textContent)}},532:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentPage=void 0;const a=n(807);t.getCurrentPage=()=>{const e=(0,a.getSpanElement)(document,"#page-num");return Number(e.textContent)}},26:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentWinnersPage=void 0;const a=n(807);t.getCurrentWinnersPage=()=>{const e=(0,a.getSpanElement)(document,"#winners-page-num");return Number(e.textContent)}},361:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getButtonElement=void 0,t.getButtonElement=(e,t)=>{const n=e.querySelector(t);if(!n)throw new Error("Element does not exists!");if(!(n instanceof HTMLButtonElement))throw new Error("Must be an HTMLButtonElement!");return n}},678:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDivElement=void 0,t.getDivElement=(e,t)=>{const n=e.querySelector(t);if(!n)throw new Error("Element does not exists!");if(!(n instanceof HTMLDivElement))throw new Error("Must be an HTMLDivElement!");return n}},14:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInputElement=void 0,t.getInputElement=(e,t)=>{const n=e.querySelector(t);if(!n)throw new Error("Element does not exists!");if(!(n instanceof HTMLInputElement))throw new Error("Must be an HTMLInputElement!");return n}},807:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanElement=void 0,t.getSpanElement=(e,t)=>{const n=e.querySelector(t);if(!n)throw new Error("Element does not exists!");if(!(n instanceof HTMLSpanElement))throw new Error("Must be an HTMLSpanElement!");return n}},825:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSvgElement=void 0,t.getSvgElement=(e,t)=>{const n=e.querySelector(t);if(!n)throw new Error("Element does not exists!");if(!(n instanceof SVGElement))throw new Error("Must be an SVGElement!");return n}},959:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTdElement=void 0,t.getTdElement=(e,t)=>{const n=e.querySelector(t);if(!n)throw new Error("Element does not exists!");if(!(n instanceof HTMLTableCellElement))throw new Error("Must be an HTMLTableCellElement!");return n}},566:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setCarToWinners=void 0;const a=n(539);t.setCarToWinners=async(e,t)=>{const n=await(0,a.getWinner)(e),r=await n.json(),s=Number((t/1e3).toFixed(2)),o={id:e,wins:0,time:0};n.ok?(o.wins=r.wins+1,o.time=s>r.time?r.time:s,await(0,a.updateWinner)(o)):(o.wins=1,o.time=s,await(0,a.createWinner)(o))}},387:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortWinner=void 0;const a=n(939);t.sortWinner=e=>e.classList.contains("sort-desc")?(e.classList.remove("sort-desc"),e.classList.add("sort-asc"),a.SortOrder.ASC):e.classList.contains("sort-asc")?(e.classList.remove("sort-asc"),e.classList.add("sort-desc"),a.SortOrder.DESC):(e.classList.add("sort-desc"),a.SortOrder.DESC)},409:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleErrorMessage=void 0;const a=n(678);t.toggleErrorMessage=()=>{const e=(0,a.getDivElement)(document,".modal");e.classList.contains("hide")?(e=>{e.textContent="Oh, no! All cars are broken, there are no winner!",e.classList.remove("hide")})(e):(e=>{e.classList.add("hide")})(e)}},502:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleWinnerMessage=void 0;const a=n(678);t.toggleWinnerMessage=e=>{const t=(0,a.getDivElement)(document,".modal");t.classList.contains("hide")&&e?((e,t)=>{const n=(e.raceDuration/1e3).toFixed(2);t.textContent=`${e.carName} finished first in ${n} seconds!`,t.classList.remove("hide")})(e,t):(e=>{e.classList.add("hide")})(t)}},939:(e,t)=>{var n,a,r;Object.defineProperty(t,"__esModule",{value:!0}),t.SortOrder=t.SortByParam=t.EngineStatus=void 0,(r=t.EngineStatus||(t.EngineStatus={})).Started="started",r.Stopped="stopped",r.Drive="drive",(a=t.SortByParam||(t.SortByParam={})).Id="id",a.Wins="wins",a.Time="time",(n=t.SortOrder||(t.SortOrder={})).ASC="ASC",n.DESC="DESC"},257:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateButtonStates=void 0;const a=n(887),r=n(986),s=n(361),o=n(532),i=n(26),c=n(678);t.updateButtonStates=()=>{(()=>{const e=(0,s.getButtonElement)(document,"#prev-page"),t=(0,o.getCurrentPage)();(0,c.getDivElement)(document,".wrapper__garage").classList.contains("hide")||(e.disabled=1===t);const n=(0,c.getDivElement)(document,".wrapper__winners"),a=(0,i.getCurrentWinnersPage)();n.classList.contains("hide")||(e.disabled=1===a)})(),(()=>{const e=(0,s.getButtonElement)(document,"#next-page"),t=(0,o.getCurrentPage)(),n=(0,a.getAllCarsAmount)();(0,c.getDivElement)(document,".wrapper__garage").classList.contains("hide")||(e.disabled=!(n/7>t));const d=(0,c.getDivElement)(document,".wrapper__winners"),l=(0,i.getCurrentWinnersPage)(),u=(0,r.getAllWinnersAmount)();d.classList.contains("hide")||(e.disabled=!(u/10>l))})()}},629:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateGarage=void 0;const a=n(539),r=n(802),s=n(172),o=n(678),i=n(807),c=n(257);t.updateGarage=async(e=1)=>{const t=await(0,a.getCars)(e),n=(0,s.renderTracks)(t.cars),d=document.createElement("div"),l=(0,i.getSpanElement)(document,"#cars-amount"),u=document.querySelectorAll(".car-track"),m=(0,o.getDivElement)(document,".wrapper__garage");u.forEach((e=>e.remove())),d.innerHTML=n,m.append(d),l.innerHTML="",l.textContent=t.amount,(0,r.setListenersToCars)(),(0,c.updateButtonStates)()}},974:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWinners=void 0;const a=n(539),r=n(989),s=n(807),o=n(257);t.updateWinners=async(e=1,t=10,n,i)=>{const c=await(0,a.getWinners)(e,t,n,i),d=await(0,r.renderWinners)(c.winners);document.querySelectorAll(".table__row").forEach((e=>e.remove()));const l=document.createElement("tbody");l.id="table-body",l.innerHTML=d;const u=document.querySelector("#table-body");u&&(u.outerHTML=l.outerHTML);const m=(0,s.getSpanElement)(document,"#winners-amount");m.innerHTML="",m.textContent=c.amount,(0,o.updateButtonStates)()}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(802),t=n(150);n(619),(async()=>{document.body.innerHTML=await(0,t.renderPage)(),(0,e.listener)()})()})()})();