import { Car, GetCarsResponse } from 'utils/types';

export const createCar = (color: string, htmlClass: string, htmlId: string) => {
  return `<svg class="${htmlClass}" id="${htmlId}" version="1.0" xmlns="http://www.w3.org/2000/svg" width="1280.000000pt" height="640.000000pt" viewBox="0 0 1280.000000 640.000000" preserveAspectRatio="xMidYMid meet">
  <g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)" fill="${color}" stroke="none">
    <path d="M3525 5341 c-72 -18 -79 -28 -90 -121 -4 -30 -11 -62 -16 -71 -4 -9 -97 -51 -206 -94 -774 -304 -1348 -540 -1603 -661 -163 -77 -222 -91 -421 -104 -85 -5 -170 -14 -189 -20 -101 -32 -362 -58 -620 -63 l-115 -2 -47 -80 c-47 -78 -47 -80 -29 -100 34 -36 35 -77 5 -177 -30 -99 -34 -178 -19 -370 5 -67 4 -88 -6 -88 -29 0 -83 -56 -110 -114 -50 -106 -74 -343 -48 -467 13 -58 13 -62 3 -159 -5 -54 16 -238 28 -244 2 -1 29 -20 61 -41 73 -49 123 -103 132 -143 17 -79 167 -155 355 -181 104 -15 969 -97 1087 -104 l32 -2 5 160 c7 230 50 394 146 559 281 479 917 673 1405 429 316 -159 530 -424 598 -742 22 -106 29 -365 13 -519 l-8 -82 3002 0 c2855 0 3002 1 2995 18 -33 87 -56 325 -45 461 28 320 177 567 459 759 399 273 847 282 1243 24 239 -157 397 -392 460 -687 18 -84 15 -341 -5 -430 -8 -38 -14 -71 -12 -73 7 -8 386 20 478 34 180 28 253 65 304 152 24 41 28 57 28 127 -1 44 -9 117 -20 163 -18 79 -18 88 -2 190 31 199 40 306 41 497 1 176 -1 195 -23 260 -46 135 -103 190 -283 274 -222 104 -633 220 -1168 330 -523 108 -1524 210 -2054 211 l-229 0 -236 139 c-813 477 -1593 884 -1852 966 -498 157 -1598 195 -2892 100 l-188 -14 -47 30 c-92 58 -223 89 -297 70z m1912 -311 c13 -45 58 -305 88 -515 33 -226 74 -539 71 -542 -7 -7 -1672 40 -2054 58 -357 16 -464 56 -573 215 -62 91 -87 225 -59 326 12 40 56 74 192 148 369 198 799 289 1618 340 246 15 290 16 510 16 l194 -1 13 -45z m649 10 c383 -36 717 -86 934 -139 210 -52 451 -163 720 -332 141 -88 379 -259 380 -271 0 -5 -14 -8 -32 -8 -48 0 -114 -37 -140 -78 -24 -39 -30 -113 -15 -189 l9 -43 -904 0 -904 0 -176 540 -175 540 47 0 c25 0 141 -9 256 -20z"/>
    <path d="M2617 3125 c-431 -82 -774 -440 -838 -875 -17 -117 -7 -292 24 -410 113 -436 497 -751 947 -777 507 -29 959 313 1076 813 28 117 26 348 -4 467 -94 378 -383 670 -760 768 -105 27 -336 34 -445 14z m378 -310 c84 -21 209 -85 280 -142 116 -94 210 -242 251 -393 23 -87 24 -260 0 -355 -58 -237 -242 -439 -473 -519 -531 -186 -1074 277 -969 828 30 152 94 274 206 386 111 110 237 178 385 206 84 16 235 11 320 -11z" />
    <path d="M10723 3125 c-318 -58 -597 -266 -743 -555 -223 -441 -98 -996 289 -1288 112 -84 188 -125 311 -166 274 -91 545 -70 802 61 552 282 735 983 392 1500 -225 339 -651 521 -1051 448z m385 -315 c348 -98 579 -443 532 -796 -67 -508 -596 -796 -1055 -574 -239 116 -396 352 -412 620 -20 335 192 640 516 745 122 40 289 42 419 5z"/>
  </g>
  </svg>`;
};

const GARAGE_CAR_HTML_CLASS = 'field__car';
const GARAGE_CAR_HTML_ID = 'car-image';

const createFlag = () => {
  return `<svg class="field__finish" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">
  <g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)" fill="#c0291e">
    <path d="M2172,4972.5c-222.8-59-487.2-192.2-696.9-347.3l-174.8-131.1l-26.2,63.3c-39.3,96.1-201,235.9-294.9,253.4c-216.2,39.3-415.1-41.5-509-207.5c-96.1-170.4-89.6-216.3,124.5-930.6c107-360.4,696.8-2335.2,1310.7-4390.8c613.8-2053.4,1133.7-3772.6,1153.4-3818.5c19.7-45.9,67.7-111.4,107-144.2c211.9-185.7,568-126.7,692.5,115.8c94,181.3,98.3,161.6-397.6,1824c-253.4,845.4-460.9,1551-460.9,1566.3c0,15.3,111.4,142,246.8,279.6C3539.4-593.5,3688-510.5,3947.9-493c216.3,13.1,421.6-41.5,1081.3-290.5c806.1-303.6,1465.8-504.6,2022.8-616c148.6-28.4,303.7-37.1,633.5-39.3c380.1,0,460.9,6.5,629.1,48.1c423.8,109.2,734,292.7,1070.4,637.9c157.3,159.5,211.9,229.4,203.2,257.8c-17.5,54.6-517.7,1730.1-1127.2,3781.3c-281.8,939.3-515.5,1706.1-524.3,1703.9c-6.6-4.4-124.5-126.7-262.1-273.1c-515.5-548.3-753.6-668.4-1332.5-668.4c-297.1,0-548.3,43.7-952.4,161.6c-299.3,85.2-1020.2,336.4-1404.6,489.3c-489.3,192.2-926.2,290.5-1389.3,308C2379.5,5014,2305.2,5009.7,2172,4972.5z M2705,4398c10.9-15.3,360.4-1166.5,360.4-1184c0-13.1-63.3-24-144.2-28.4c-179.1-4.4-456.6-98.3-620.4-205.4c-65.5-43.7-218.5-179.1-336.4-299.3c-118-122.3-220.6-216.3-225-211.9c-15.3,15.3-377.9,1188.4-377.9,1221.1c0,37.1,323.3,349.5,471.9,458.7c139.8,100.5,406.3,229.4,535.2,255.6C2447.2,4419.8,2694,4415.5,2705,4398z M5370,3596.3c133.3-32.8,343-78.6,469.7-98.3c126.7-21.8,231.6-39.3,233.7-41.5c13.1-10.9,375.7-1201.5,369.2-1210.2c-37.1-35-878.1,144.2-1306.3,279.6l-146.3,45.9l-98.3,310.2c-52.4,170.4-137.6,441.3-187.9,602.9c-50.2,161.7-96.1,305.8-102.7,321.1c-6.5,15.3,96.1-8.7,260-61.2C5009.6,3699,5239,3631.2,5370,3596.3z M3583.1,2916.9c118-37.1,362.6-124.5,541.7-194.4c181.3-67.7,421.6-155.1,537.4-194.4l207.5-67.7l229.4-738.3c144.2-465.3,220.6-738.4,205.3-742.7c-26.2-6.6-288.3,85.2-827.9,290.5c-181.3,69.9-415,146.4-522.1,174.8l-196.6,50.2l-227.2,727.4c-122.3,399.8-225,736.2-225,744.9C3305.7,2997.7,3364.7,2986.8,3583.1,2916.9z M8279.8,1785.4l225-749.3l-50.2-43.7c-310.2-270.9-803.9-447.8-1192.7-428.1l-139.8,6.5l-227.2,738.3c-126.7,406.3-222.8,744.9-216.3,751.5c6.6,6.6,107,21.8,220.6,30.6c373.5,30.6,760.2,172.6,1004.9,367c61.2,45.9,120.1,83,131.1,80.8C8048.2,2536.8,8157.4,2196,8279.8,1785.4z M3646.5,1359.4c2.2,0,83-262.1,181.3-581.1c98.3-318.9,183.5-594.2,187.9-613.8c8.8-28.4-19.6-39.3-163.8-59c-386.7-54.6-629.1-179.1-950.2-489.3l-218.4-211.9L2501.8-12.5c-98.3,321.1-179.1,598.6-179.1,616c0,17.5,115.8,152.9,257.8,297.1c225,233.7,277.4,275.2,441.3,356.1c201,96.1,369.2,135.4,524.3,118C3600.6,1368.1,3646.5,1361.6,3646.5,1359.4z M5892.1,636.3c310.2-87.4,744.9-176.9,967.7-198.8l159.5-15.3l56.8-187.9c30.6-102.7,115.8-373.5,185.7-598.5c69.9-227.2,128.9-423.8,128.9-439.1c0-59-653.2,78.6-1190.5,251.2l-270.9,85.2L5831-154.5c-52.4,170.4-133.3,428.2-179.1,572.3c-43.7,144.2-85.2,275.2-91.8,292.7c-8.8,24-2.2,28.4,28.4,15.3C5610.3,717.2,5747.9,677.8,5892.1,636.3z"/>
  </g></g>
  </svg>`;
};

const createControlsBlock = () => {
  return `
  <div class="garage__controls controls">
    <div class="controls-line">
      <input type="text" class="controls__input" id="set-car-name" />
      <input type="color" class="controls__color" id="set-car-color" value="#FFFFFF" />
      <button class="controls__create button" id="create-car">CREATE</button>
    </div>
    <div class="controls-line">
      <input type="text" class="controls__input" id="update-car-name" disabled />
      <input type="color" class="controls__color" id="update-car-color" value="#FFFFFF" disabled />
      <button class="controls__update button" id="update-car" data-car="0" disabled>UPDATE</button>
    </div>
    <div class="controls-line">
      <button class="controls__race button" id="race">RACE</button>
      <button class="controls__reset button" id="reset" disabled>RESET</button>
      <button class="controls__generate button" id="generate">GENERATE CARS</button>
    </div>
  </div>`;
};

const createTrack = (carProps: Car) => {
  return `
  <div class="car-track" id="${carProps.id}">
    <button class="car-track__button button" id="select">SELECT</button>
    <button class="car-track__button button" id="remove">REMOVE</button>
    <span class="car-track__name" id="car-name">${carProps.name}</span>
    <div class="car-track__field field">
      <button class="field__accelerate" id="accelerate">A</button>
      <button class="field__brake" id="brake" disabled>B</button>
      ${createCar(carProps.color, GARAGE_CAR_HTML_CLASS, GARAGE_CAR_HTML_ID)}
      ${createFlag()}
    </div>
  </div>`;
};

export const renderTracks = (cars: Array<Car>) => {
  let result = '';
  cars.forEach((car) => {
    result += createTrack(car);
  });
  return result;
};

export const renderGaragePage = (garage: GetCarsResponse, page = 1) => {
  return `
  <div class="wrapper__garage garage">
    <div class="modal hide"></div>
    ${createControlsBlock()}
    <h1 class="header">Garage (<span id="cars-amount">${garage.amount}</span>)</h1>
    <h2 class="page-num">Page #<span id="page-num">${page}</span></h2>
    ${renderTracks(garage.cars)}
  </div>`;
};
